{"ast":null,"code":"import _slicedToArray from\"/Users/hudro/code/js-react-course/react_calc/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect}from'react';import{useState}from'react';import'./Calc.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Calc=function Calc(props){var _useState=useState('0'),_useState2=_slicedToArray(_useState,2),disp=_useState2[0],setDisplay=_useState2[1];var _useState3=useState(26),_useState4=_slicedToArray(_useState3,2),fz=_useState4[0],setFontSize=_useState4[1];function changeDisplay(key){setDisplay(function(disp){var opers=['*','/','%','+','-'];var last=disp.at(-1);if((disp==='NaN'||disp.indexOf('nfinity')>-1)&&key!=='AC'){return disp;}if(opers.includes(key)){if(opers.includes(last)){return disp;}else{if(disp==='0'){if(key==='-'){return key;}return disp;}return disp+key;}}if(key==='.'){try{var _=\"\".concat(eval(disp+key))!=='NaN';return disp+key;}catch(_unused){return disp;}}switch(key){case'AC':return'0';case'<':if(disp.length===1){return'0';}return\"\".concat(disp.slice(0,disp.length-1));case'=':try{return\"\".concat(eval(disp));}catch(error){return\"NaN\";}default:if(disp==='0'){return key;}return disp+key;}});}useEffect(function(){setFontSize(function(fz){if(disp.length<12){return 26;}else if(disp.length<16){return 20;}else if(disp.length<19){return 17;}else if(disp.length<22){return 14;}else{return 10;}});},[disp]);var keyboard=['AC','(',')','/','7','8','9','*','4','5','6','-','1','2','3','+','0','.','<','='];var orange=['/','*','-','+','='];return/*#__PURE__*/_jsxs(\"div\",{className:\"calc-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"screen_wrapper\",style:{fontSize:fz},children:disp})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid-container\",children:keyboard.map(function(key,i){var classes=\"grid-container-item item\".concat(i);if(i<3){classes+=' ft';}else if(orange.includes(key)){classes+=' lc';}return/*#__PURE__*/_jsx(\"div\",{className:classes,onClick:function onClick(e){return changeDisplay(e.target.innerText);},children:key},i);})})]});};export default Calc;","map":{"version":3,"names":["useEffect","useState","Calc","props","disp","setDisplay","fz","setFontSize","changeDisplay","key","opers","last","at","indexOf","includes","_","eval","length","slice","error","keyboard","orange","fontSize","map","i","classes","e","target","innerText"],"sources":["/Users/hudro/code/js-react-course/react_calc/src/modules/calc/Calc.js"],"sourcesContent":["import { useEffect } from 'react';\nimport { useState } from 'react'\nimport './Calc.scss'\n\nconst Calc = (props) => {\n    const [disp, setDisplay] = useState('0');\n    const [fz, setFontSize] = useState(26);\n\n    function changeDisplay(key) {\n        setDisplay(disp => {\n            const opers = ['*', '/', '%', '+', '-']\n            const last = disp.at(-1)\n\n            if ((disp === 'NaN' || disp.indexOf('nfinity') > -1) && key !== 'AC') {\n                return disp\n            }\n\n            if (opers.includes(key)) {\n                if (opers.includes(last)) {\n                    return disp\n                } else {\n                    if (disp === '0') {\n                        if (key === '-') {\n                            return key\n                        }\n                        return disp\n                    }\n                    return disp + key\n                }\n            }\n\n\n            if (key === '.') {\n                try {\n                    const _ = `${eval(disp + key)}` !== 'NaN'\n                    return disp + key\n                } catch {\n                    return disp\n                }\n            }\n\n            switch (key) {\n                case 'AC':\n                    return '0'\n                case '<':\n                    if (disp.length === 1) {\n                        return '0'\n                    }\n                    return `${disp.slice(0, disp.length - 1)}`\n                case '=':\n                    try {\n                        return `${eval(disp)}`\n                    } catch (error) {\n                        return `NaN`\n                    }\n                default:\n                    if (disp === '0') {\n                        return key\n                    }\n\n                    return disp + key\n            }\n        })\n    }\n\n    useEffect(() => {\n        setFontSize(fz => {\n            if (disp.length < 12) {\n                return 26\n            } else if (disp.length < 16) {\n                return 20\n            } else if (disp.length < 19) {\n                return 17\n            } else if (disp.length < 22) {\n                return 14\n            } else {\n                return 10\n            }\n\n\n        })\n    }, [disp])\n\n    const keyboard = [\n        'AC', '(', ')', '/',\n        '7', '8', '9', '*',\n        '4', '5', '6', '-',\n        '1', '2', '3', '+',\n        '0', '.', '<', '='\n    ]\n\n    const orange = ['/', '*', '-', '+', '=']\n\n    return (\n        <div className=\"calc-wrapper\">\n            <div className=\"screen\">\n                <div className=\"screen_wrapper\" style={{ fontSize: fz }} >{disp}</div>\n            </div>\n            <div className=\"grid-container\">\n                {\n                    keyboard.map((key, i) => {\n                        let classes = `grid-container-item item${i}`\n                        if (i < 3) {\n                            classes += ' ft'\n                        } else if (orange.includes(key)) {\n                            classes += ' lc'\n                        }\n                        return (\n                            <div key={i} className={classes}\n                                onClick={(e) => changeDisplay(e.target.innerText)}>\n                                {key}\n                            </div>\n                        )\n                    })\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default Calc;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}